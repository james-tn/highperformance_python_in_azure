{
    "name": "parallelprocessing",
    "properties": {
        "activities": [
            {
                "name": "callservicebusapi",
                "description": "",
                "type": "WebActivity",
                "dependsOn": [],
                "policy": {
                    "timeout": "7.00:00:00",
                    "retry": 0,
                    "retryIntervalInSeconds": 30,
                    "secureOutput": false,
                    "secureInput": false
                },
                "userProperties": [],
                "typeProperties": {
                    "url": "https://management.azure.com/subscriptions/0e9bace8-7a81-4922-83b5-d995ff706507/resourceGroups/azureml/providers/Microsoft.ServiceBus/namespaces/amlservibus/queues/landing?api-version=2017-04-01",
                    "method": "GET",
                    "headers": {
                        "Authorization": "Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Imh1Tjk1SXZQZmVocTM0R3pCRFoxR1hHaXJuTSIsImtpZCI6Imh1Tjk1SXZQZmVocTM0R3pCRFoxR1hHaXJuTSJ9.eyJhdWQiOiJodHRwczovL21hbmFnZW1lbnQuY29yZS53aW5kb3dzLm5ldC8iLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC83MmY5ODhiZi04NmYxLTQxYWYtOTFhYi0yZDdjZDAxMWRiNDcvIiwiaWF0IjoxNTk2NzY5OTQyLCJuYmYiOjE1OTY3Njk5NDIsImV4cCI6MTU5Njc3Mzg0MiwiYWNyIjoiMSIsImFpbyI6IkFVUUF1LzhRQUFBQStqRkZwcXMvaTk2MSttczF2LzZVc1AwZEdWMVROWWgrNmF5R0VxeVU3aERwUjBuQi8yZU91d2JKZXNmbTBPclEvc1NJODZCQzJ0aW55KzdOTFRnN21RPT0iLCJhbXIiOlsicnNhIiwibWZhIl0sImFwcGlkIjoiN2Y1OWE3NzMtMmVhZi00MjljLWEwNTktNTBmYzViYjI4YjQ0IiwiYXBwaWRhY3IiOiIyIiwiZGV2aWNlaWQiOiI1ZjViOWM4Ny0yOGRmLTRmNzctYWNhYy03YTBkOTAzN2U3NzgiLCJmYW1pbHlfbmFtZSI6Ik5ndXllbiIsImdpdmVuX25hbWUiOiJKYW1lcyIsImdyb3VwcyI6WyIyNTBhZjAwNi0yMDBlLTQ2ZTUtOWM0Yy1iNmRjOTcxZmY1NTciLCI5ZDM1YzVjYS1kZjRmLTRhM2QtOWUyYi0wYzI5MWVhNGM4ZGEiLCJlZTcyNWI0ZS01MjQwLTRlMjMtYjcxNS1hZTI3MTNjOWM5ZDIiLCJjMTg2ZmUyMS1jMjkyLTQ0YjAtYjZlZi1kYmVjM2VjZTZmYjgiLCI2NzE0ZjczMy0wNjVlLTQ3ZjctYmZjNy05OTZkNWQyYjYwOGMiLCI0YzU3MWRjMy01NTYxLTQyN2UtOWQxOC1hMDYyZmRkM2VkZTUiLCJmM2UwM2M0OC03MDM2LTQ3MDYtOTFlYi04ODg4N2M2OTI4OTkiLCI5ODA5M2U4ZC0zOWYyLTRkZGQtYWNiNS0wMjQ2N2ZjOWVhNWQiLCJlZGM5YzlmZS00ZjFkLTQyOTUtYmIwNC00OGQ1MWYxMTE3YzQiLCJmMzg1NGE5MS1hMTc2LTRmOTEtODY4OS1kMWViNTkyZDlkYTYiLCIzMjdlNTdjNy0xMmY0LTRiYjAtYjA2Ni04ODZjOTA2MDhmNTQiLCJkMzU4MDNmZS0yZDM4LTRmNTQtYWUwZS1kYTc5NzlmYmE1MWIiLCIwMDM3YTljMy0yOWE0LTRhODQtOTE2MC05MTZkOTczZWFjZjYiLCIwZDRiMTRjMC1iYTc2LTRhOTAtOWIyYS1iZmQzM2U4M2JiMGIiLCI2NzkzOWRlNy0zZDE3LTQ5YzQtOTZhNy0xNTYxZWZhMjUxNGUiLCJlNjEzOGVlMi1iNTY3LTQ5ZWItOTdkZi04ZjE3Nzc2ODJhY2YiLCIyMDA4MjYxYy01ZjFiLTQ2ZWQtOGFlZC1mYTUxYzIzMjk4ZTYiLCI4NjVjNGQ0NC1hOTA2LTQ5M2MtOGNkMS03MWFmY2ZiZjJiNWQiLCI4YWFhMzE4NC1lNTZiLTRlYzktODhkOS1lZDY0Mjc5MWIxYmIiLCI5YTMyZDJkYy00OTM2LTQ4M2YtYmExNi0yM2ViODU3YTlkNmEiLCJiYmQxN2IxNC03ZWViLTQxZTYtOGQ2My04N2Y5ZmRkMzAyNjYiLCI4MDI3M2UzNC0wNzcxLTQ5NzAtOTA4ZC1iNTQ1YWY0MDA0NzAiLCJlMTE1YjE4NC0zNjc2LTRjNGYtYTRjZi01ZDM1YTlmNzg4MGYiLCI2Yzk3NjRjMS1mYWUxLTQyOTYtOTE0NC1mZjM5MDg1NjE5NjQiLCJlM2U4ZDQ1ZC1hY2EzLTQ1MmQtOTJlNy04ODgzMjdhNWZiNWIiLCJlZTVkOTVmOS1mN2Y4LTQ2NjktYTE4ZS0yODAyYjBlZDNhMzYiLCJmNjU4MTg2Ny1mYjNlLTRhNmMtYmE4MS1mNWZmZTAzNjlmMTEiLCIyMjY2YzhkZC0yMTJmLTRhMDEtODg4Ni1jZTUyNWE5NDY4MDQiLCIxMWE3NzJmOC1lOTA3LTQ1YzMtYTM0Yi0zMWRlMmNmOWJhZGUiLCJhYjFkNjEzMS0yNTE4LTQ0NTgtOTMzOS1kYTY1MDI4NDVhNjQiLCI2NDQ0ZjFmYS00MDUyLTQ1ZDMtYTRjMi1mZmQ0NjJmNjg2MWUiLCI0YWJkYjYyMC1mNzE2LTQ0NWUtOTUwMy0wYzE1YTNjZWMxZDEiLCJhOWZhOTI1OC1lYzdlLTQ3ODMtOGZhMi0xZjc5NjY5YWFlNDQiLCI1NDY4MzdhYS05ZjZjLTQzN2ItOTkyZC1kODgxZWExZDhjNDkiLCIwNTg3Y2JiOS0xOGViLTQ3YjQtYmFlOC01MzdhMjFlYjNjNjYiLCIwZDZkMGRiNS03ZDQxLTRlMjMtOTk0Yy1iZTM1YTNmMDc2MjgiLCI4NTZhZjlkMi01NjE0LTQxZTMtYmI5MS1jN2U2Mzk2ZWRjZDUiLCI2OWNjNjJiYS0xMjA4LTRkM2MtYTQzOC04ODIyMDcwZTk5Y2UiLCJhM2UxM2U5ZC01M2NiLTRhMTctYjdhNi1kNWFiNDVhYTA4N2IiLCIzNWU2Y2M2ZC1hNTZhLTQ1ZWMtYWZlZC02NjQ1MGQ0YjY1MzciLCI0YmM2Njg4NC1mYWE1LTQ3M2YtOTRjMy01YTJhZDNjNjM3MDUiLCI2Y2JlN2U1Zi1iY2YyLTRlYjAtODQzMi05N2ViOTI0MWQ1NTEiLCI4MDA3ODZhYS05YmUxLTQ2MzAtYTA3ZS04NjhmZjc1ODFiODciLCIwNGRlYWJkNi01NTJmLTQzNjctOTJhNS1iZGZkZDM3NTBmYWIiLCIxOGU1ODNkMy1kMmYxLTRlMTAtYTBlYi02Y2MxZjNiNzQwNTQiLCI0MzUzMWY4Ny1iZGI1LTQ2Y2YtOWJhNy04MDVjNTA4YTZiOTEiLCJhZDE4ZDdhMi01NGU4LTQwYzgtYjliZC1jMTY3Y2NmNDNhNzYiLCI4MDA5N2JlNC03NjE0LTRhMjAtYmJkZS1kNDU4MDQyMDRjMGMiLCJkMTViYzdlMS03NWZhLTQ1ZTItYWI4MS0yNDA2NGJmMmM2OTYiLCIwZTY2ZmVjMi0yZmY1LTQ4NWQtODBhMC1iZDIzMWE3NWVkNGYiLCI0MDlhNmI4Zi05NDZiLTQ3ZDktYjk0NC01YTczMzhkYzJlMTkiLCJjZjM1MDcxZS0zNmRhLTQ5NGMtYjBkOS00NzM4MjY5YWQzMzAiLCI1ZmNjMTUyNS0wZGMzLTRjZWEtODU2Ni0xODE4MDk4MmE4ZmYiLCI2NGFhOWE0ZS0zN2E4LTQ5NzctOGM2OS0wOGY4ZDRhOWI3OGQiLCI4YTM5YWMyYS1hYzJhLTQ5M2ItYTlkOC00Njc4NzU3MzJlZWYiLCIzMTgwY2VmYS05MzgzLTRhZWYtODE5ZS0wODcyY2QyYTcxMzAiLCIyMmEyMjliZC1jN2EyLTQ5ZDAtOWVhYS1lMWZjODg4ZGFhYzYiLCI5YjIxM2Y2ZC0yN2I1LTRkMjUtOGVhMC1iZTI3MDI5OWEzOTgiLCIxY2RmODkxMi00YjhjLTQwYWQtYjQ4Zi1mZjk1N2FlMGIxM2IiLCJkZjRlZGExNS02YmY3LTQzZGMtOGRmZi03Zjg4ZTA0YzE3NDUiLCI5ZDUyOWQ1ZS1iODgyLTRmZmItYThlNi1jNDE0N2M2ODA3MzUiLCJiZThjYTM3OC1iYzc0LTQ2YzEtYjkyMi1lN2Y1NTI0ODZlZGUiLCJhOWY2MGY3YS05MjgzLTRmMjMtYmYzZC03MmI2ODM2MjM4MGMiLCIxYTFmMWZjMS1lNmVmLTQ4ZDUtOWFkMi04NGUzNThkYjIzNTgiLCI0MzhkNzU1Mi05NzczLTQ2ZmYtODYxOC00ZjVlZTg1ZDYxMDgiLCIzNGZmNzQxOC1mMzJkLTRiMTUtYmNkMC1iYjRlYzc5Nzk2YzEiLCI3Njk4YzllMi01NjNhLTRkMWEtYTQ0NC03ZDUxODdlNjdiOWIiLCJlN2M0M2QwMC00MjAwLTQ0ZmUtOGJkYi1kNDhmYzQ4NDFlMmEiLCIwZWY5MTU3Ny02NjM3LTQ4NTAtYTRjNC04OTFhMWRmYjRhYTQiLCI2MDNlYmQ2ZS1kNmZkLTQ5MzYtOTYxYy05ZmI4NTQ1YzUwNDQiLCI1NWVmYTljOS05MjQ2LTQ4YmYtOTdhNC05OTg3OTc3YzRkNWQiLCI5NzI4MzQyZi1lMWE1LTRhOGEtYWMyMC1lM2EzZGU1ZTEzZGUiLCJiNTE1NDc5Yy05ZGY3LTQ0YjQtOTMwNC1jMjViMWVhOGQzNTgiLCJhYzkyNDUyYy02MWYyLTQyNTktOWVlMy05OWRlMDA4ZTE2NmYiLCI3YmI0MjU3Ni0wYmYzLTQzMjEtOWZlOC02ZDg1OWNhODkyYmIiLCIwNGEyNGNlOS01M2EwLTQ0YzktOWRkMC1hNzA0OWU2ZGM0NmEiLCI2NjQyMzE5OS1kOTk3LTQyNDMtOTAwMC01ZjY0NWIyNzNjNzIiLCJkNmE4ZWUwNC0xOGYwLTRhM2QtOTM2Mi1jZTMzM2ZiNjA0ZmUiLCJjNDY5ZTY4NS1kMTQ1LTQyMjUtOGVhZi1jZWY5MTE2OTYyMjEiLCIxZjU5ZThjNi0xZDU1LTQxMzMtODNhYy1iY2QxNWU3ZGNiMzYiLCI4ZjQwYWY1NS01NjE3LTQzZDAtODA1Mi0yNDQ4OGVkZDlkNjYiLCIzNmM1MjZhZC1jNDhmLTQ2NGQtYTY4Ny1iNTA4ZDMyMWFkYjciLCJjMDlhYTFkMC0zYWFiLTQ0ZGMtYjA5Yi00MzYxZTRkMWZjMzYiLCJiZjUzMDRjZi03NzFjLTQyY2MtOWZmOC01NzdlOTlkNjYxMDEiLCJkYzFkOTcxZC04MjM5LTRjZjUtYjA5ZC1hY2FlOGFlYWZiZmUiLCI4ZjgyYzU3Ni03MGY0LTQwNDAtOGFjMy1kN2YyNTMzMDExMzMiLCIyODQ2MTkwZC0wNWRjLTQwNDgtOTBiYy03ZTIzNmYzNGQ4NGIiLCI2MmVkYmQ3Yi04ZDQ2LTRkMmMtYTVhMS1kYTViNzhiYTFkMzgiLCI2MmVjZWRhNC0wNWRmLTQ4YWEtOWRmZi1hODYzNjQ2MWVkZDUiLCJkYTBhMDFhMi1hM2M0LTQ5NmItYmM0Zi0xYzQ5MGRjOTQ3OTQiLCJkNzI5ZjhkZi1iNjMxLTQ3NWQtYWNiNS0xYTE4YTA2ODkwNWIiLCJlZjQ2Zjc0Ny1mOTk5LTRmZjAtYTY1Zi1hN2ZmNWIxMjI2NjIiXSwiaXBhZGRyIjoiNTAuNDcuMTM2LjE2IiwibmFtZSI6IkphbWVzIE5ndXllbiIsIm9pZCI6IjQ1ZTk2OGVkLWEwNmMtNGNiOS1hOWNhLTJmMzJiZmY5MTAwNyIsIm9ucHJlbV9zaWQiOiJTLTEtNS0yMS0yMTI3NTIxMTg0LTE2MDQwMTI5MjAtMTg4NzkyNzUyNy0zMTExMzc4MiIsInB1aWQiOiIxMDAzMDAwMEE5QTJCN0Q5IiwicmgiOiIwLkFSb0F2NGo1Y3ZHR3IwR1JxeTE4MEJIYlIzT25XWC12THB4Q29GbFFfRnV5aTBRYUFCRS4iLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzdWIiOiJCWlBleHQ2dzBKS3dUYnVDNWlUNWM5YjlsTjlIRjg3eVlFbEhKUTBSaGM0IiwidGlkIjoiNzJmOTg4YmYtODZmMS00MWFmLTkxYWItMmQ3Y2QwMTFkYjQ3IiwidW5pcXVlX25hbWUiOiJqYW5ndXlAbWljcm9zb2Z0LmNvbSIsInVwbiI6Imphbmd1eUBtaWNyb3NvZnQuY29tIiwidXRpIjoiNVlCWFFKXzVVMHFCSWdJbzAwVThBQSIsInZlciI6IjEuMCIsInhtc190Y2R0IjoxMjg5MjQxNTQ3fQ.MxN2zRdioAzh--d00X8e5MwDbrFsFd9odcFbAGnRFZTHi_oankk__JHY1yLh4GrWJGnJM-efzhqTYaEoqXkax87wLuSzd-n64PMJXrg-nNfAJ-4voKPctA6jKEmE7hAM-mpVUC8oiPrpNsH8Br7L3iGHMYSNnfX68w16ilNDMiRofdCUjecEPV5fdOLLWRsFUpSMD3WbwhwcR1SOGew3Q4kbjPwKz6VRbEkNo_KV8J9rAVRd0-qKg1ysF74zJKXFAG3I5e8FYlKy-oZselIOvR6w9iNlJu1qWjgc9mQGWL1JB4RPXXaVYYpclx0uiuWoKRK3AUTancJKT6EN2qYrSw"
                    }
                }
            },
            {
                "name": "Machine Learning Execute Pipeline1",
                "type": "AzureMLExecutePipeline",
                "dependsOn": [
                    {
                        "activity": "callservicebusapi",
                        "dependencyConditions": [
                            "Succeeded"
                        ]
                    }
                ],
                "policy": {
                    "timeout": "7.00:00:00",
                    "retry": 0,
                    "retryIntervalInSeconds": 30,
                    "secureOutput": false,
                    "secureInput": false
                },
                "userProperties": [],
                "typeProperties": {
                    "mlPipelineId": "04a70886-0780-473c-9f64-afb10e1d3026",
                    "experimentName": "preprocessing_example",
                    "mlPipelineParameters": {
                        "queue_length": {
                            "value": "@activity('callservicebusapi').output.properties.countDetails.activeMessageCount",
                            "type": "Expression"
                        },
                        "num_node": {
                            "value": "@int(div(activity('callservicebusapi').output.properties.countDetails.activeMessageCount,2))\n",
                            "type": "Expression"
                        },
                        "preprocess_batch_size_param": "1"
                    }
                },
                "linkedServiceName": {
                    "referenceName": "amlws01ent",
                    "type": "LinkedServiceReference"
                }
            }
        ],
        "annotations": []
    },
    "type": "Microsoft.DataFactory/factories/pipelines"
}